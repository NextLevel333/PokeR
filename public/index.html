<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Texas Hold'em Poker - Lobby</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <div id="app">
        <!-- Lobby Screen -->
        <div id="lobby" class="screen active">
            <div class="lobby-container">
                <h1 class="game-title">Texas Hold'em Poker</h1>
                
                <div class="lobby-form">
                    <h2>Join Game</h2>
                    
                    <div class="form-group">
                        <label for="playerName">Enter Your Name:</label>
                        <input type="text" id="playerName" placeholder="Your name" maxlength="20" required>
                    </div>

                    <div class="form-group">
                        <label>Choose Your Avatar:</label>
                        <div class="avatar-selection-inline">
                            <div class="avatar-preview" id="avatarPreview">
                                <div class="avatar-placeholder selected" id="avatarPlaceholder">ðŸ‘¤</div>
                                <!-- If an image avatar is selected, the <img> will be injected here -->
                            </div>
                            <button id="chooseAvatarBtn" class="btn">Choose Avatar</button>
                        </div>
                        <small class="muted">Click "Choose Avatar" to pick an image from /public/avatars</small>
                    </div>

                    <div class="form-group">
                        <label>Select Table:</label>
                        <div class="table-selection">
                            <div class="table-card" data-table="community">
                                <h3>Community Table</h3>
                                <div class="table-info">
                                    <span class="player-count">0/10 Players</span>
                                    <span class="table-status">Open</span>
                                </div>
                            </div>
                            
                            <div class="table-card" data-table="private">
                                <h3>Private Table</h3>
                                <div class="table-info">
                                    <span class="player-count">0/10 Players</span>
                                    <span class="table-status">Open</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button id="joinTableBtn" class="btn btn-primary" disabled>Join Table</button>

                    <hr/>

                    <h3>Appearance</h3>
                    <div class="form-group">
                        <label for="lobbyBgInput">Lobby background URL/path:</label>
                        <input id="lobbyBgInput" type="text" placeholder="/backgrounds/lobby.jpg" />
                    </div>
                    <div class="form-group">
                        <label for="tableBgInput">Table background URL/path:</label>
                        <input id="tableBgInput" type="text" placeholder="/backgrounds/table.jpg" />
                    </div>
                    <small class="muted">Enter paths relative to the server root (e.g., /backgrounds/lobby.jpg). Images can be placed in public/backgrounds/</small>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game" class="screen">
            <div class="game-header">
                <div class="table-name"></div>
                <button id="leaveTableBtn" class="btn btn-secondary">Leave Table</button>
            </div>

            <div class="poker-table">
                <div class="table-felt">
                    <!-- Community Cards -->
                    <div class="community-cards">
                        <div class="card-slot"></div>
                        <div class="card-slot"></div>
                        <div class="card-slot"></div>
                        <div class="card-slot"></div>
                        <div class="card-slot"></div>
                    </div>

                    <!-- Players area (existing markup left intact) -->
                    <div class="players-row">
                        <!-- player seats will be updated dynamically -->
                    </div>
                </div>
            </div>

            <div class="action-area">
                <div class="controls">
                    <button id="foldBtn" class="btn control-btn fold">Fold</button>
                    <button id="checkCallBtn" class="btn control-btn check">Check / Call</button>

                    <div class="raise-area">
                        <input id="raiseAmount" type="number" min="0" placeholder="Amount" />
                        <input id="raiseSlider" type="range" min="0" max="1000" value="0" />
                        <button id="raiseBtn" class="btn control-btn raise">Raise / Bet</button>
                    </div>
                </div>

                <div id="winnerDisplay" class="winner-display"></div>
            </div>
        </div>
    </div>

    <!-- Avatar picker modal -->
    <div id="avatarModal" class="avatar-modal-overlay" aria-hidden="true" style="display:none;">
        <div class="avatar-modal" role="dialog" aria-modal="true" aria-labelledby="avatarModalTitle">
            <div class="avatar-modal-header">
                <h3 id="avatarModalTitle">Choose Avatar</h3>
                <button id="closeAvatarModalBtn" class="close-btn">Ã—</button>
            </div>

            <div id="avatarModalContent" class="avatar-grid">
                <!-- avatar images will be injected here by JS -->
                <div id="avatarModalLoading" class="avatar-loading">Loading avatars...</div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/app.js"></script>
</body>
</html>